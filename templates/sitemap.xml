<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9
        http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">

    <!-- High Priority Pages -->
    {% for page in high_priority_urls %}
    <url>
        <loc>{{ domain }}{{ page.url }}</loc>
        <lastmod>{{ current_date|date:"Y-m-d" }}</lastmod>
        <changefreq>{{ page.changefreq }}</changefreq>
        <priority>{{ page.priority }}</priority>
    </url>
    {% endfor %}

    <!-- Medium Priority Pages -->
    {% for page in medium_priority_urls %}
    <url>
        <loc>{{ domain }}{{ page.url }}</loc>
        <lastmod>{{ current_date|date:"Y-m-d" }}</lastmod>
        <changefreq>{{ page.changefreq }}</changefreq>
        <priority>{{ page.priority }}</priority>
    </url>
    {% endfor %}

    <!-- Dynamic Subject Pages -->
    {% for subject in subjects %}
    <url>
        <loc>{{ domain }}{% url 'subjects:detail' subject.slug %}</loc>
        <lastmod>{{ subject.updated_at|date:"Y-m-d" }}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>0.8</priority>
    </url>
    {% endfor %}

    <!-- Dynamic Grade/Subject Pages -->
    {% for level in class_levels %}
    <url>
        <loc>{{ domain }}{% url 'subjects:grade_subject' level.level_number level.subject.slug %}</loc>
        <lastmod>{{ level.updated_at|date:"Y-m-d" }}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>0.7</priority>
    </url>
    {% endfor %}

    <!-- Dynamic Topic Pages -->
    {% for topic in topics %}
    <url>
        <loc>{{ domain }}{% url 'subjects:topic_detail' topic.class_level.level_number topic.class_level.subject.slug topic.slug %}</loc>
        <lastmod>{{ topic.updated_at|date:"Y-m-d" }}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>0.6</priority>
    </url>
    {% endfor %}

</urlset>

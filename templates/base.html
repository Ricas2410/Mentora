<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>{% block title %}Pentora (Mentora) - Ghana's Leading Online Education Platform | BECE & WASSCE Preparation | Free Quality Education{% endblock %}</title>
    <meta name="description" content="{% block description %}Pentora (formerly Mentora) - Ghana's premier online education platform providing free quality education, BECE preparation, WASSCE preparation, interactive learning, and comprehensive study materials for JHS and SHS students. Access online studies, educational quizzes, and expert-curated content for academic excellence.{% endblock %}">
    <meta name="keywords" content="{% block keywords %}education, online learning, e-learning, digital education, Mentora, Pentora, educational platform, online studies, BECE preparation, WASSCE preparation, Ghana education, primary education, secondary education, JHS, SHS, mathematics, english, science, social studies, online quizzes, study notes, exam preparation, free education, quality education, academic excellence, student learning, educational resources, study materials, interactive learning, personalized education, learning platform, educational technology, EdTech Ghana, online tutoring, curriculum-based learning, grade-specific content, comprehensive education, academic support, learning management, distance learning, virtual classroom, educational app, study platform, learning app, education Ghana, school online, free online learning, grades 1-12, English learning, Mathematics, ICT, Life Skills, online school{% endblock %}">
    <meta name="author" content="Pentora Learning Platform">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">

    <!-- Open Graph Meta Tags for Social Media -->
    <meta property="og:title" content="{% block og_title %}Pentora - Free Online Learning Platform for All Grades{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Access free educational content, interactive quizzes, and comprehensive study materials for Grades 1-12. Learn English, Math, Science, and more!{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{% block og_url %}{{ request.build_absolute_uri }}{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{{ request.scheme }}://{{ request.get_host }}{% load static %}{% static 'images/Pentora-og-image.jpg' %}{% endblock %}">
    <meta property="og:site_name" content="Pentora Learning Platform">
    <meta property="og:locale" content="en_US">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}Pentora - Free Online Learning Platform{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Free educational platform with quizzes and study materials for all grades{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{{ request.scheme }}://{{ request.get_host }}{% load static %}{% static 'images/Pentora-twitter-card.jpg' %}{% endblock %}">

    <!-- Canonical URL -->
    <link rel="canonical" href="{% block canonical_url %}{{ request.build_absolute_uri }}{% endblock %}">

    <!-- Favicon and App Icons -->
    {% load site_images %}
    {% get_site_favicon as custom_favicon %}
    {% if custom_favicon %}
        <link rel="icon" type="image/x-icon" href="{{ custom_favicon }}">
        <link rel="apple-touch-icon" sizes="180x180" href="{{ custom_favicon }}">
        <link rel="icon" type="image/png" sizes="32x32" href="{{ custom_favicon }}">
        <link rel="icon" type="image/png" sizes="16x16" href="{{ custom_favicon }}">
    {% else %}
        <link rel="icon" type="image/x-icon" href="{% load static %}{% static 'favicon.ico' %}">
        <link rel="apple-touch-icon" sizes="180x180" href="{% load static %}{% static 'images/apple-touch-icon.png' %}">
        <link rel="icon" type="image/png" sizes="32x32" href="{% load static %}{% static 'images/favicon-32x32.png' %}">
        <link rel="icon" type="image/png" sizes="16x16" href="{% load static %}{% static 'images/favicon-16x16.png' %}">
    {% endif %}>

    <!-- PWA Manifest -->
    <link rel="manifest" href="{% load static %}{% static 'manifest.json' %}">
    <meta name="theme-color" content="#121d83">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Pentora">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">

    <meta name="msvalidate.01" content="B22122BDFE18A09A555F2621A0E58E75" />
    <meta name="google-site-verification" content="A_Kcye10Uv-VNismGcofJo8uoiHPW5EUPTKRIo37V1c" />

    <!-- Tailwind CSS + DaisyUI -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Enhanced UI CSS -->
    <link rel="stylesheet" href="{% load static %}{% static 'css/enhanced-ui.css' %}">

    <!-- Custom CSS -->
    <style>
        :root {
            --primary-blue: #121d83;
            --primary-purple: #39127e;
            --success-green: #22C55E;
            --error-red: #EF4444;
            --bg-light: #F9FAFB;
            --text-dark: #111827;
            --text-gray: #374151;
            --card-white: #FFFFFF;
        }

        .gradient-bg {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);
        }

        .card-hover:hover {
            transform: translateY(-2px);
            transition: transform 0.2s ease-in-out;
        }

        .nav-item {
            transition: all 0.2s ease;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
        }

        .nav-item:hover {
            background: rgba(59, 130, 246, 0.1);
            transform: translateY(-1px);
        }

        .nav-icon {
            font-size: 1.25rem;
            margin-right: 0.5rem;
        }

        .mobile-nav-item {
            padding: 1rem;
            border-bottom: 1px solid #E5E7EB;
            transition: background 0.2s ease;
        }

        .mobile-nav-item:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-dark);
            color: white;
            padding: 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            white-space: nowrap;
            z-index: 1000;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-gray);
        }

        .card {
            background: var(--card-white);
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }

        /* PWA Install Button */
        #install-app {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        /* Offline indicator */
        .offline-indicator {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #f59e0b;
            color: white;
            text-align: center;
            padding: 8px;
            z-index: 1001;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }

        .offline-indicator.show {
            transform: translateY(0);
        }

        /* Scroll animations */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .animate-on-scroll.animate-in {
            opacity: 1;
            transform: translateY(0);
        }

        /* Keyboard navigation focus styles */
        .keyboard-navigation *:focus {
            outline: 2px solid var(--primary-blue);
            outline-offset: 2px;
        }

        /* Loading skeleton */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Lazy loading images */
        img.lazy {
            opacity: 0;
            transition: opacity 0.3s;
        }

        img.lazy.loaded {
            opacity: 1;
        }
    </style>

    {% block extra_css %}{% endblock %}

    <!-- Google Analytics -->
    {% if not debug %}
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    {% endif %}
</head>
<body class="min-h-screen bg-base-100">
    <!-- Navigation -->
    <nav class="navbar gradient-bg shadow-lg sticky top-0 z-50">
        <div class="navbar-start">
            <!-- Mobile menu button -->
            <div class="dropdown lg:hidden">
                <div tabindex="0" role="button" class="btn btn-ghost btn-circle text-white" aria-label="Open menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path>
                    </svg>
                </div>
                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-0 shadow-lg bg-white rounded-lg w-64 border">
                    <!-- Always show these to visitors -->
                    <li class="mobile-nav-item">
                        <a href="{% url 'core:home' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-3 px-4">
                            <i class="fas fa-home nav-icon text-blue-500 text-lg mr-3"></i>
                            <span class="font-medium text-base">Home</span>
                        </a>
                    </li>
                    <li class="mobile-nav-item">
                        <a href="{% url 'subjects:simple_learn' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-3 px-4">
                            <i class="fas fa-book nav-icon text-green-500 text-lg mr-3"></i>
                            <span class="font-medium text-base">Learn</span>
                        </a>
                    </li>
                    <li class="mobile-nav-item">
                        <a href="{% url 'subjects:quiz_list' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-3 px-4">
                            <i class="fas fa-question-circle nav-icon text-purple-500 text-lg mr-3"></i>
                            <span class="font-medium text-base">Quiz</span>
                        </a>
                    </li>

                    {% if user.is_authenticated %}
                        <div class="divider my-1"></div>
                        <li class="mobile-nav-item">
                            <a href="{% url 'core:dashboard' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-3 px-4">
                                <i class="fas fa-tachometer-alt nav-icon text-blue-600 text-lg mr-3"></i>
                                <span class="font-medium text-base">Dashboard</span>
                            </a>
                        </li>
                        <li class="mobile-nav-item">
                            <a href="{% url 'users:profile' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-3 px-4">
                                <i class="fas fa-cog nav-icon text-gray-500 text-lg mr-3"></i>
                                <span class="font-medium text-base">Settings</span>
                            </a>
                        </li>
                        {% if billing_enabled %}
                        <li class="mobile-nav-item">
                            <a href="{% url 'billing:dashboard' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-3 px-4">
                                <i class="fas fa-credit-card nav-icon text-green-500 text-lg mr-3"></i>
                                <span class="font-medium text-base">Billing</span>
                                {% if not user_subscription_active %}
                                <span class="badge badge-warning badge-xs ml-2">!</span>
                                {% endif %}
                            </a>
                        </li>
                        {% endif %}
                    {% endif %}
                </ul>
            </div>

            <!-- Logo -->
            <a href="{% url 'core:home' %}" class="btn btn-ghost text-xl font-bold text-white hover:bg-white hover:bg-opacity-20">
                {% get_site_logo as custom_logo %}
                {% if custom_logo %}
                    <img src="{{ custom_logo }}" alt="{% get_site_name %}" class="h-8 w-auto mr-2">
                {% else %}
                    <div class="w-8 h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center mr-2">
                        <i class="fas fa-graduation-cap text-white text-sm"></i>
                    </div>
                    {% get_site_name %}
                {% endif %}
            </a>
        </div>

        <!-- Desktop Navigation -->
        <div class="navbar-center hidden lg:flex">
            <ul class="menu menu-horizontal px-1 space-x-3">
                <!-- Always show these to visitors -->
                <li>
                    <a href="{% url 'core:home' %}" class="nav-item tooltip flex items-center text-white hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg" data-tooltip="Home page">
                        <i class="fas fa-home nav-icon text-lg mr-2"></i>
                        <span class="font-medium text-lg">Home</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'subjects:simple_learn' %}" class="nav-item tooltip flex items-center text-white hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg" data-tooltip="Browse subjects and lessons">
                        <i class="fas fa-book nav-icon text-lg mr-2"></i>
                        <span class="font-medium text-lg">Learn</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'subjects:quiz_list' %}" class="nav-item tooltip flex items-center text-white hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg" data-tooltip="Practice quizzes">
                        <i class="fas fa-question-circle nav-icon text-lg mr-2"></i>
                        <span class="font-medium text-lg">Quiz</span>
                    </a>
                </li>

                {% if user.is_authenticated %}
                    <li>
                        <a href="{% url 'core:dashboard' %}" class="nav-item tooltip flex items-center text-white hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg" data-tooltip="Your learning dashboard">
                            <i class="fas fa-tachometer-alt nav-icon text-lg mr-2"></i>
                            <span class="font-medium text-lg">Dashboard</span>
                        </a>
                    </li>
                    {% if billing_enabled %}
                    <li>
                        <a href="{% url 'billing:dashboard' %}" class="nav-item tooltip flex items-center text-white hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg" data-tooltip="Manage your subscription">
                            <i class="fas fa-credit-card nav-icon text-lg mr-2"></i>
                            <span class="font-medium text-lg">Billing</span>
                            {% if not user_subscription_active %}
                            <span class="badge badge-warning badge-xs ml-2">!</span>
                            {% endif %}
                        </a>
                    </li>
                    {% endif %}
                {% endif %}
            </ul>
        </div>

        <!-- User Menu -->
        <div class="navbar-end">
            {% if user.is_authenticated %}
                <div class="dropdown dropdown-end">
                    <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar hover:bg-white hover:bg-opacity-20">
                        <div class="w-10 h-10 rounded-full border-2 border-white border-opacity-50">
                            {% if user.profile_picture %}
                                <img src="{{ user.profile_picture.url }}" alt="Profile" class="rounded-full" />
                            {% else %}
                                <div class="bg-white bg-opacity-20 text-white w-full h-full rounded-full flex items-center justify-center font-bold">
                                    {{ user.first_name|first }}{{ user.last_name|first }}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow-lg bg-white rounded-lg w-56 border">
                        <li class="menu-title px-4 py-2">
                            <div class="text-gray-800 font-semibold">{{ user.full_name }}</div>
                            <div class="text-gray-500 text-xs">{{ user.email }}</div>
                        </li>
                        <div class="divider my-1"></div>
                        <li><a href="{% url 'users:profile' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-2"><i class="fas fa-user mr-2"></i> Profile & Settings</a></li>
                        {% if billing_enabled %}
                        <li>
                            <a href="{% url 'billing:dashboard' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-2">
                                <i class="fas fa-crown mr-2"></i>
                                {% if user_subscription.is_active %}
                                    <span>{{ user_subscription.plan.name }} Plan</span>
                                    <span class="badge badge-success badge-xs ml-2">Active</span>
                                {% else %}
                                    <span>Subscription</span>
                                    <span class="badge badge-warning badge-xs ml-2">Free</span>
                                {% endif %}
                            </a>
                        </li>
                        {% endif %}
                        <li><a href="{% url 'progress:overview' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-2"><i class="fas fa-chart-line mr-2"></i> My Progress</a></li>
                        <li><a href="{% url 'progress:achievements' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-2"><i class="fas fa-trophy mr-2"></i> Achievements</a></li>
                        <li><a href="{% url 'core:help' %}" class="flex items-center text-gray-700 hover:text-blue-600 py-2"><i class="fas fa-question mr-2"></i> Help Center</a></li>
                        <div class="divider my-1"></div>
                        <li><a href="{% url 'users:logout' %}" class="flex items-center text-red-600 hover:text-red-700 py-2"><i class="fas fa-sign-out-alt mr-2"></i> Sign Out</a></li>
                    </ul>
                </div>
            {% else %}
                <div class="flex items-center space-x-3">
                    <a href="{% url 'users:login' %}" class="btn btn-ghost text-white hover:bg-white hover:bg-opacity-20 font-medium">Sign In</a>
                    <a href="{% url 'users:register' %}" class="btn bg-white bg-opacity-20 text-white hover:bg-white hover:text-blue-600 font-medium border-0">Get Started</a>
                </div>
            {% endif %}
        </div>
    </nav>

    <!-- Main Content -->
    <main class="min-h-screen">
        <!-- Billing Announcements -->
        <div class="container mx-auto px-4 pt-4">
            {% include 'billing/announcement_banner.html' %}
        </div>

        <!-- Messages -->
        {% if messages %}
            <div class="container mx-auto px-4 mb-4">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} mb-2">
                        <span>{{ message }}</span>
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        {% block content %}{% endblock %}
    </main>

    <!-- Feedback Widget -->
    {% include 'components/feedback_widget.html' %}

    <!-- Footer -->
    <footer class="gradient-bg text-white mt-8 sm:mt-16">
        <div class="container mx-auto px-4 py-8 sm:py-12">
            <!-- Mobile: 3 columns, Desktop: 4 columns -->
            <div class="grid grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-8">
                <!-- Brand Section - spans full width on mobile -->
                <div class="col-span-3 lg:col-span-1 text-center lg:text-left mb-4 lg:mb-0">
                    <div class="flex items-center justify-center lg:justify-start mb-3">
                        <div class="w-8 h-8 lg:w-10 lg:h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center mr-2 lg:mr-3">
                            <i class="fas fa-graduation-cap text-white text-sm lg:text-lg"></i>
                        </div>
                        <h3 class="text-lg lg:text-xl font-bold">Pentora</h3>
                    </div>
                    <p class="text-white text-opacity-80 mb-3 text-xs lg:text-sm leading-relaxed">
                        Empowering underprivileged learners through quality education.
                    </p>
                    <div class="flex justify-center lg:justify-start space-x-2">
                        <a href="#" class="w-7 h-7 lg:w-8 lg:h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center hover:bg-opacity-30 transition-all">
                            <i class="fab fa-facebook-f text-xs"></i>
                        </a>
                        <a href="#" class="w-7 h-7 lg:w-8 lg:h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center hover:bg-opacity-30 transition-all">
                            <i class="fab fa-twitter text-xs"></i>
                        </a>
                        <a href="#" class="w-7 h-7 lg:w-8 lg:h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center hover:bg-opacity-30 transition-all">
                            <i class="fab fa-instagram text-xs"></i>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="text-center lg:text-left">
                    <h4 class="text-sm lg:text-base font-semibold mb-2 lg:mb-3">Quick Links</h4>
                    <ul class="space-y-1">
                        <li><a href="{% url 'core:home' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Home</a></li>
                        <li><a href="{% url 'subjects:list' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Subjects</a></li>
                        <li><a href="{% url 'core:about' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">About</a></li>
                        <li><a href="{% url 'core:contact' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Contact</a></li>
                    </ul>
                </div>

                <!-- Learning -->
                <div class="text-center lg:text-left">
                    <h4 class="text-sm lg:text-base font-semibold mb-2 lg:mb-3">Learning</h4>
                    <ul class="space-y-1">
                        {% if user.is_authenticated %}
                            <li><a href="{% url 'core:dashboard' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Dashboard</a></li>
                            <li><a href="{% url 'progress:overview' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Progress</a></li>
                            <li><a href="{% url 'progress:achievements' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Achievements</a></li>
                        {% else %}
                            <li><a href="{% url 'users:register' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Get Started</a></li>
                            <li><a href="{% url 'users:login' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Sign In</a></li>
                        {% endif %}
                        <li><a href="{% url 'subjects:list' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Browse</a></li>
                    </ul>
                </div>

                <!-- Support -->
                <div class="text-center lg:text-left">
                    <h4 class="text-sm lg:text-base font-semibold mb-2 lg:mb-3">Support</h4>
                    <ul class="space-y-1">
                        <li><a href="{% url 'core:help' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Help</a></li>
                        <li><a href="#" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Privacy</a></li>
                        <li><a href="#" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Terms</a></li>
                        <li><a href="{% url 'core:contact' %}" class="text-white text-opacity-80 hover:text-opacity-100 transition-all text-sm lg:text-sm">Support</a></li>
                    </ul>
                </div>
            </div>

            <!-- Bottom Section -->
            <div class="border-t border-white border-opacity-20 mt-6 sm:mt-8 pt-6 sm:pt-8">
                <div class="flex flex-col sm:flex-row justify-between items-center text-center sm:text-left">
                    <div class="text-white text-opacity-80 text-xs sm:text-sm mb-3 sm:mb-0">
                        © 2024 Pentora Educational Platform. Empowering learners to rebuild their dreams.
                    </div>
                    <div class="flex items-center space-x-2 sm:space-x-4 text-xs sm:text-sm">
                        <span class="text-white text-opacity-80">Made with</span>
                        <i class="fas fa-heart text-red-400"></i>
                        <span class="text-white text-opacity-80">for underprivileged learners</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Theme toggle functionality
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Load saved theme
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        });
    </script>

    <!-- PWA Install Button -->
    <button id="install-app" class="btn btn-primary btn-circle shadow-lg">
        <i class="fas fa-download"></i>
    </button>

    <!-- Offline Indicator -->
    <div class="offline-indicator" id="offline-indicator">
        <i class="fas fa-wifi-slash mr-2"></i>
        You're offline. Some features may be limited.
    </div>

    <!-- Ultra-Conservative Progress Bar Cleanup (Load First) -->
    <script src="{% load static %}{% static 'js/progress-bar-cleanup.js' %}?v=3"></script>

    <!-- Enhanced JavaScript -->
    <script src="{% load static %}{% static 'js/app.js' %}?v=4"></script>
    <script src="{% load static %}{% static 'js/ux-enhancements.js' %}"></script>
    <script src="{% load static %}{% static 'js/mobile-navigation.js' %}"></script>
    <script src="{% load static %}{% static 'js/performance-optimizer.js' %}?v=4"></script>
    <script src="{% load static %}{% static 'js/ui-interactions.js' %}"></script>
    <script src="{% load static %}{% static 'js/page-specific-enhancements.js' %}?v=3"></script>

    <!-- Service Worker Registration -->
    <script>
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // Handle online/offline status
        function updateOnlineStatus() {
            const indicator = document.getElementById('offline-indicator');
            if (navigator.onLine) {
                indicator.classList.remove('show');
            } else {
                indicator.classList.add('show');
            }
        }

        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);

        // Initial check
        updateOnlineStatus();

        // Performance monitoring
        window.addEventListener('load', () => {
            // Monitor Core Web Vitals
            if ('web-vitals' in window) {
                // This would require importing the web-vitals library
                // getCLS(console.log);
                // getFID(console.log);
                // getFCP(console.log);
                // getLCP(console.log);
                // getTTFB(console.log);
            }
        });
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
